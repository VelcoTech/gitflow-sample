name: ⭐ Create release
on:
  push:
permissions:
  contents: write
jobs:
  get-versions:
    name: 🔢 Get versions
    runs-on: ubuntu-22.04
    outputs:
      short: ${{ steps.get-short.outputs.short }}
    steps:
      - uses: actions/checkout@v3
      - name: 🔢 Get git short sha
        id: get-short
        run: echo "short=$(git rev-parse --short HEAD)" >> $GITHUB_OUTPUT
  create-release:
    runs-on: ubuntu-22.04
    needs: [get-versions]
    steps:
      - uses: actions/checkout@v3
      - id: get-version
        uses: VelcoTech/gitflow-sample/.github/actions/get-version@develop
      - run: echo ${{ steps.get-version.outputs.new-version }}
#      - run: echo '{"version":"1.0.3"}' > package.json
#      - uses: stefanzweifel/git-auto-commit-action@v4
#      - uses: ncipollo/release-action@v1
#        with:
#          token: ${{ secrets.GITHUB_TOKEN }}
#          name: v${{ needs.get-versions.outputs.short }}
#          tag: ${{ needs.get-versions.outputs.short }}
#          artifactErrorsFailBuild: true
#          artifactContentType: application/zip
#          skipIfReleaseExists: true
